apply plugin: 'java-library'
apply plugin: 'kotlin'

task generateFromFiles(type: JavaExec) {
    group = 'fluentui'
    description = 'Generate all FluentUI resources and source files for the given stylesheet files'

    classpath sourceSets.main.runtimeClasspath
    main = "microsoft.fluentui.generator.MainKt"
    args 'generate'

    doFirst {
        if (project.hasProperty("regular") && project.hasProperty("dark")) {
            args regular
            args dark
        } else {
            println "Usage: -Pregular=[pathToRegularStylesheetFile] -Pdark=[pathToDarkStylesheetFile]"
            throw new ProjectConfigurationException("FluentUI", new Exception("No stylesheet files specified"))
        }
    }
}

task generateAll(type: JavaExec) {
    group = 'fluentui'
    description = 'Generate all FluenUI resources and source files for all stylesheets'

    classpath sourceSets.main.runtimeClasspath
    main = "microsoft.fluentui.generator.MainKt"
    args 'generate'
}

task cleaner(type: JavaExec) {
    group = 'fluentui'
    description = 'Remove all auto-generated resources and source files'

    classpath sourceSets.main.runtimeClasspath
    main = "microsoft.fluentui.generator.MainKt"
    args 'clean'
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"

    implementation 'org.yaml:snakeyaml:1.23'
    testImplementation 'junit:junit:4.12'
}